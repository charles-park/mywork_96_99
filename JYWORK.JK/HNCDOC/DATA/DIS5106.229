

#901   김병제   (sowhat  )
[홈오토 1]  개  요                           03/30 17:47   61 line

 홈 오토메이션 기능을 갖는 기계는
 크게 여섯가지 기능을 갖는 부분으로 구성됩니다.
   첫째. 전체 기능을 종합해서 콘트롤 해주는 제어 CPU 부
   둘째. 전화벨을 카운트하는 '링 디텍션' 회로
   세째. 전화를 받는 '매칭부'
   네째. 전화 다이얼 디지트 톤을 분석하는 부분
   다섯째. 전화 다이얼 톤을 만들어 내는 부분
   여섯째. 기기를 ON/OFF 제어하는 부분
 으로 구성됩니다.
 그런데 여기서 각 기능 부분이라고 한것들은
 사실은 기껏해야 IC 칩 하나로 구성됩니다... 후후..
 
 CPU 는 항상 생각하고 제어를 한다는걸염두에 두고
 이 기계가 동작하는걸 다음과 같이 상상해보세요.
 
 우선 이 기계는 처음 초기상태는 전화벨이 울리는지 감시합니다.
 그래서 지정된 벨 횟수 만큼 울리면, 사람이 전화를 받은것과
 같은 상태로 만들어주지요. 그리고는 전화를 건 사람이
 버튼으로 제어 명령을 내리면 그에 따라 주어진 순차적 동작을
 행하게 되는거지요. 또한 중간중간에, 사람이 진행 상황을 인식할 수
 있도록 적절한 톤 소리로 응답을 해줍니다.
 그리고는 주어진 조건에 맞도록 비밀번호라든지 제어 번호를 적절하게
 입력하게 되면 그에 따라 가전기기들을 제어 하게 되는겁니다.
 
 이를 좀더 알아듣기 쉽게 예를 들면서 하지요...
 전화 벨수를 카운트해서 전화를 받는것은 자동응답기를 생각해 보세요..
 일정한 횟수 동안 벨이 울리면 자동으로 받게 되어 있지요??
 그와 똑같은 링 디텍션 회로가 그안에 있습니다.
 
 그다음 일단 전화를 받으면 제어하는 걸 생각해 봅시다..
 우리가 일반 전화로 통화할때 다이얼 버튼을 누르면
 '삑.~~ 삑 ~~' 하는  디지트 버튼 소리가 상대편에 전해 지지요?
 바로 그 소리를 감지하는 회로(칩) 이 있어요.
 즉 상대편에서 몇 번 버튼을 눌렀다 라고 그 신호를 분석해서
 바이너리 숫자 데이터로 내주는 회로(칩)가 있는겁니다.
 결국 이러한 것들을 조합해서 프로그램을 하기만 하면
 어떠한 가전기기도 제어를 할 수 있는거지요..
 무선 호출기 '삐삐' 를 치는것과 아주 똑같은 원리입니다.
 교환기가 전화를 받아서 '삑삑..' 하는 응답신호를 보내면
 우리는 자신의 전화번호를 입력하지요??
 그런식으로 비밀번호하고 제어하려는 기기의 고유번호(자기가 정함)
 를 누르면 켜고/끄고 하게 되는겁니다.
 
 기본원리는 워낙 간단하므로 프로그램 골격은 별것 아니지만
 모든 통신 및 제어 프로그램들이 그렇듯, 중간에 주어진대로
 번호를 입력하지 않는다거나 벨이 울리다 말았다거나
 진행하다 전화를 끊는다던가 하는 '예외상황' 에 대처하기 위해
 골머리 썩는게 완벽한 기기를 만드는 관건 이지요..
 그냥 정상적인 순서에만 따라 정상적인 길만 가는 시나리오의
 프로그램은 아주 간단합니다.
 
 그럼.. 이정도로 서론을 마치도록 하고
 다음 부터는 각 기능부 별로 하드웨어적인 구성과 기능등을
 좀 깊이 살펴보도록 하겠습니다.
 관심이 있다거나 공고정도 다니시는 분은 충분히 알아들을 수있을정도로
 쉽게 하도록 노력 하겠습니다.
 
 그럼.. 이만..

             >>>>>>>>  김  영  우 (ynwkim) <<<<<<<<
e


#904   김병제   (sowhat  )
[홈오토 2]  벨 감지부                        03/31 13:00   35 line

  
   --- 전화 링 디텍션 회로부 ---
 
 (흠.. 여기부터는 설명의 편의성을 위하여 존칭을 쓰지 않겠습니다)
 
 전화벨이 울리는 원리는 다음과 같다.
 벨이 울리는 순간에는 전화선엔 100V 20Hz 의 교류 전류가 흐른다.
 즉 "따르르릉~~" 또는 "끼리릭~" 하는 소리는
 1 초에 ON/OFF 를 20 번 하는 소리인 것이다.
 
 또한 전화 수화기가 올려져 있을때는 전화선에 직류 48V 가 걸려있고,
 통화를 하기위해 수화기를 들면 그 순간에는 12V 직류가 가해진다.
 별도전기가 필요없는 스피커폰 또는 벨 확성기는 이 전력을 별도로 빼내서
 전원으로 사용한다.
 
 따라서 적당한 전자회로( 콘덴서 0.1 uF 1개, 저항 22K, 저항 180 오옴
 짜리 각 1개면 됨)나 계전기를 사용, 48V 보타 큰 전압이 걸리면
 신호로 1 을 나타내는 회로를 부가하여 CPU 가 이를 읽어 들이게 하여
 그 숫자를 카운트해 지정된 숫자가 되면, 다음 회에서 설명할
 "전화접속부" 를 동작시켜 기계가 전화를 받도록 만든다.
 즉, 5 회면 20*5=100(회) 가 카운트 되면 전화를 받도록 만든다.
 
 단, 여기서 주의할 점이 있는데, 벨 신호가 있을 때마다 CPU 에서는
 3초 정도의 적당한 자체 타이머를 동작시켜서 3초 이내에 계속
 벨 신호가 없으면 카운트를 0 으로 리셋 시켜야 한다.
 만일 이러한 리셋이 없는 상황을 생각해보면, 기계를 처음 동작시킨후
 띄엄 띄엄이라도 10 번 벨이 울리면 무조건 전화를 받게 된다.
 즉, 연속해서 3 초 이내에 벨이 계속 다시 울릴때만 카운트 값을
 증가시켜야 하는것이다.
 
 --- 다음회 안내 === '전화 접속부'  ------
 
 
         >>>>>>   김  영  우  (ynwkim)  <<<<<<



#906   김병제   (sowhat  )
[홈오토 3]  전화 접속부분                    04/01 09:29   50 line

   --- 전화 접속부 ---
 
 교환기에서 바라본 전화의 모양(?)은 다음과 같다.
 그것을 임피이던스(총체적 저항값) 라고 하는데
 전화기의 경우 600 오옴을 가진다.
 
 즉 교환기에서 전화기측을 보면
 수화기를 정위치에 놓은 상태에서는
 전화벨로 가는 콘덴서 만이 접속된 상태이므로
 직류적으로는 선이 끊어진것 같고
 교류적으로는 아주 높은 저항지를 갖는것으로 보인다.
 
 그런데 걸려오는 전화를 받거나, 전화를 걸기위해 수화기를 들면
 후크 스윗치가 통화상태 쪽으로 접속되어 600 오옴짜리 저항이
 붙어 있는것과 마찬가지로 보이는 것이다.
 이는 직류로 볼때 그냥 600 오옴 저항이 붙어있는걸로 보이는것이고
 음성신호 같은 교류는 주파수에 따라서 저항치가 달라지기 때문에
 이 경우엔 1 KHz 신호를 보낼때 저항치가 600 오옴인 경우를 기준한다.
   (이런 점을 이용해서 자동 전화고장 시험기 (자기국번+1166) 를
    운용하여 고장, 단선, 통화중, 수화기방치를 구분하는것이다.)
 
 따라서, 앞서 설명한 링 감지회로에 의해서 정해진 횟수의 링이
 카운트 되면 전화선 양단에 600 오옴 저항을 접속시키면 교환기는
 전화를 받은것으로 간주하고 송신자와 수신자간의 통화로를 구성하게 된다.

 그런데 실제로는 이러한 단순한 저항을 접속시키기만 하는것이 아니고
 음성신호를 빼내기 위하여 1:1 (600:600) 트랜스를 접속시킨다.
 우리가 모뎀의 내부기판을 보면 철심에 쌓여 있는 밤알만한 트랜스를
 볼 수가 있는데 이것이 바로 이 매칭 트랜스이다.
 
 자.. 그럼 여기서 재미있는 실험을 해보자..
 전화벨은 100V 20Hz 신호이고 우리가 통상적으로 쓰는
 100V 6V 아답터속에도 100V : 6V 강압 트랜스가 들어있으므로
 아답터 출력에 스피커나 이어폰을 접속한채로
 벨이 울리는 중에 전화선에 트랜스 입력을 접속하면
 내부 트랜스 용량에 따라서,
 입력 임피이던스가 600 오옴이 넘는거라면 벨소리가 스피커로 울릴것이고,
 600 오옴보다 작은 거라면 전화를 받은걸로 되어 벨은 끊기고
 상대편 모소리가 이어폰으로 들릴것이다.

 이와 같은원리에 입각하여 자동으로 전화를 받게하는 전화 접속부가
 설계되는데, 이와 같은 회로는 모뎀, 자동응답기, 음성사서함등의
 회로 첫단부를 구성하는 필수요소이다..
 
 
     -------  다음회 안내 : 전화 디지트 톤 감지,분석 부 ---
 
 
         >>>>>>>>>  김영  우  (ynwkim)  <<<<<<<<



#907   김병제   (sowhat  )
[홈오토 4]  다이얼(디지트) 톤 분석부         04/01 09:33   59 line


  --- 다이얼 디지트 톤 분석회로 ---
 
 전화 다이얼 버튼을 누르면 '삐삐' 하는 소리가 나는데
 이것은 DTMF (Dual Tone Multi Frequency) 라고 해서
 두가지 정현파 신호(가장 단순한 깨끗한 음)를 합성한 것이다.
 
 홈 오토메이션을 하는 경우에 제어 명령을 수신하기 위해서는
 송화자가 누른 이 합성된 버튼신호가 전화선을 타고 들려올때
 이 신호를 분석해서 어느 숫자의 버튼이 눌렸는가를
 알아낼 필요가 있는것이다.
 
 이것도 역시 입력신호를 분석하기 위해서는
 아주 복잡한 필터회로가 필요하나
 워낙 널리 사용되는회로이기 때문에
 이미 상업용으로 칩하나에 집적해서 만든 신호분석칩이 나와 있다.
 
 이 회로만의 시험을 고려해 본다면,
 앞서 강좌에서 설명된 전화접속 회로, 즉 600:600 오옴 트랜스의 입력단은
 전화선 양쪽에, 출력단의 신호는 그냥 이 칩의 입력단에 직접 접속해주면
 출력부(핀)에선 그 신호가 몇 번 버튼을 누른것인지 데이터로 출력된다.
 물론 별다른 부품 없이 단순히, 칩에 +5V 전원과 3.58MHz 수정진동자만
 접속해주면 된다.
 
 출력은 핀 5 개에 나타나는데, 그중 하나는 신호의 존재 유무를 High/Low 로

 나타내고, 나머지 네개는 핀의 조합으로 0~9, *, #, A,B,C,D 해당 버튼을
 바이너리로 나타낸다. (신형 전화에서는 A,B,C,D 버튼이 없어졌음)
 결국, 이 신호를 CPU 로 입력하여 이를 읽어들여 프로그램으로 적당한
 제어를 수행하게 하면 되는것이다.
 
 참고로, 필자가 알고 있는 칩을 소개하자면
 SSI 2090, MC145436, MT8860 등을 시중에서 쉽게 구할수 있으며,
 1~2 천원 정도의 저가격인 것으로 알고 있다.
 
 ------------------------
 
 이번에도, DTMF가 어떤 것인지를 명확히 알 수 있는
 재미난 실험을 해보기로 한다.

 수화기를 들고 가로줄로 1,2,3 버튼을 눌러보면서
 소리를 분석하면서 비교해보면 두가지 소리가 합성된 것임을
 금방 알수가 있다. 즉, 1,2,3 으로 버튼이 달라져도 똑같은 음높이를 가진
 한가지 소리가 있을것이며, 또한 '도~레~미' 하는것 같이
 버튼에 따라 음이 점차 올라가는 또 다른 한소리를 들을수 있을것이다.
 이들 두 가지 소리가 합성된것이 바로 DTMF 신호인것이다.
 또한, 세로줄로 1,4,7 을 눌러도 똑같은 상황임을 알수 있다.
 결국 가로로 4 가지 주파수, 세로로 4 가지 주파수
 총합 8 가지 주파수를 조합해서 4*4=16 가지 서로 다른 신호를
 합성해내고, 반대로 분석할 수 있는것이다.
 
 실제로 이들 DTMF 를 분석한 결과, 인간의 어떠한 목소리로도
 이러한 DTMF 를 흉내 낼수 없다는 것이 실험결과로 보고 되어있다.
 
    -----  다음회 안내 : 프로그레스 (전화진행) 톤 분석부 ----
 
 
             >>>>>>>>>>>>  김  영  우 (ynwkim)   <<<<<<<<<<



#908   김병제   (sowhat  )
[홈오토 5]  콜신호 톤 분석부                 04/01 09:34   62 line


  --- 접속 신호 (Call Progress) 톤 분석회로 ---
 
 전화를 접속시켜 주기위해 접속진행 중에 교환기가 가입자에게
 들려주는 신호음을 Call Progress 신호라고 하는데,
 이 신호도 전화 다이얼 디지트 톤과 마찬가지로
 DTMF (Dual Tone Multi Frequency) 신호이다.
 
 홈 오토메이션을 하는 경우
 제어자가 정상적으로 제어를 마치고 끊든,
 실수로 도중에 전화가 끊어지든 간에,
 전화를 끊겼는지를 확인하기 하기위해서
 이때 발생하는 '통화중 신호'를 감지할 필요가 있는데
 이러한 신호들을 감지해서 분석해 주는 회로역시
이미 상업용으로 칩하나에 집적해서 만든 칩이 나와 있다.
 
 참고로, 필자가 알고 있는 칩을 소개하자면
 SSI 981, 982 칩이 있는데, 이들도 시중에서 쉽게 구할수 있으며,
 1~2 천원 정도의 저가격인 것으로 알고 있다.
 
 이 회로의 시험을 고려해 본다면,
 앞서 강좌에서 설명된 다이얼 톤 분석 칩과 마찬가지로
 트랜스의 입력단은 전화선 양쪽에, 출력단의 신호를 칩의 입력단에
 직접 접속해주면 출력부(핀)에선 그 신호가 무슨 신호인지를
 데이터로 출력한다.
 예를 들면, 다이얼 톤은 1, 통화중음은 5, 링백톤은 3 등
 접속시 발생하는 여러가지 톤에 대한 번호가 할당되어 있다.
 이것 역시 별다른 부품 없이 단순히, 칩에 +5V 전원과
 3.58MHz 수정진동자만 접속해주면 된다.
 
 출력은 핀 5 개에 나타나는데, 그중 하나는 신호의 존재 유무를 High/Low 로

 나타내고, 나머지 네개는 핀의 조합으로 해당 신호 데이터를
 바이너리로 나타낸다.
 
 ------------------------
 
 이번에도, 그냥 넘어가기 서운하므로 몇 가지 팁을 추가 하갰다.
 우리가 전화비를 아끼겠다는 생각으로 서로간에 전화를 안받고
 링 울리는 횟수로 어떠한 약속을 하는 경우가 있다.

 그런데 이건 사실 신뢰성이 없는것이다.
 전화기에서 울리는 신호를 링 신호, 거는쪽 수화기에 이 사실을
 알리기 위해 '꼬로록' 하는 신호를 링 백 신호라고 하는데,
 링 신호는 수화자 측 교환기가, 링백신호는 송화자측 교환기가
 만들어 주는것이며 이들간에 시간적 동기는 반드시 일치한다고
 볼 수 없으므로 링백 신호를 세번 들었다해서 벨이 세번 울렸다고
 보장 할수는 없다.
 하지만.. 교환기가 하나의 대형 컴퓨터라는걸 생각하면,
 1 초라는건 컴퓨터에게 엄청나게 긴시간이란걸 감안한다면
 통화 폭주가 아주 심한시간대를 제외하고는
 대략 이런 동기는 비슷하게 진행한다고 볼 수도 있다.
 하지만 100 % 보장하지는 못한다는것은 알고 있어야하겠다.
 그러나, 같은 교환기내에서 진행하는 신호일 경우
 즉, 다시말해 같은 국번끼리 전화를 하는 경우라면
 이때는 100 % 보장할 수 있다.
 
    -----  다음회 안내 : 다이얼 톤 (디지트) 발생 회로  ----
 
 
             >>>>>>>>>>>>  김  영  우 (ynwkim)   <<<<<<<<<<



#909   김병제   (sowhat  )
[홈오토 .막.]  디지트 톤 생성회로            04/01 09:36   35 line


  --- 다이얼 (디지트) 톤 발생회로 ---
 
 앞서 강좌에서 설명한대로 전화 다이얼 (디지트) 톤은
 DTMF (Dual Tone Multi Frequency) 신호이다.
 이를 발생 시키려면 두가지 정현파를 합성하면 되는데
 이는 좀 복잡한 발진회로가 필요하게 된다.
 그러나,
 이러한것은 또한 우리 같은 사용자 입장에서는
 지저분한 일이기도 하고 그 수많은 전화기 마다
 그러한 지저분한 회로를 넣어야 한다는것 역시
 전화기 생산회사로서도 마땅치 않은 것이다.
 
 그래서 자연적으로 이들도 칩하나에 집적한 상용칩이
 나오는건 당연한 일이다.
 필자가 알고 있는 칩을 소개하자면,
 앞서 톤 분석 칩으로 소개한  SSI 2090 칩은 DTMF 트랜시버라 하여
 분석회로와 발생회로가 함께 들어있는 칩이다.

 즉, 이 칩의 Input DATA 핀에 발생시키고자 하는 디지트(바이너리)
 수를 입력하고 Strobe 핀을 High 에서 Low 로 Activate 시켜주면
 Low 인 동안 출력핀에서 원하는 톤이 출력되게 된다.
 역시 주변부품으론 +5V 전원과 수정발진자 만을 필요로 한다.
 따라서 그동안의 여러 회로들을 한 부분에 모은다 해고
 그들 칩이외에 특별한 부품들을 필요로 하지 않는
 간단한 회로가될 수 있다.
 
 또한, 이러한 데이터 입력방식 톤 발생 칩은 홈 오토메이션 같은
 제어회로에 사용하는 것이고, 실제로 전화기에 사용되는 발생 칩은
 특정한 키패드의 조합을 감지해서 해당 숫자의 톤을 발생 시키는
 키패드용 톤발생 칩이 사용된다. 끝.
 
  
             >>>>>>>>  김  영  우 (ynwkim)   <<<<<<<<



#937   김병제   (sowhat  )
[정보] 홈오토 칩 국내딜러 알았습니다.        06/01 17:28   57 line

제가 홈 오토에 관한 강좌를 하고서  
여러 사람 한테서 관련 칩을 살수 있는곳을
알려달라는 메일을 많이 받았거든요~

겨우 알아냈습니다.
그런데 찝찝하게시리~ 전화로 확인하니까
별별걸 다 물어보더라구요~
 
회사가 어디냐, 몇개가 필요하냐 그런거요~
그래서 취미로 한두개 사고 싶은데
그런데 전화하려면 찜찜 하더라구요~
그거 각오하시고 전화해서 구입을 협의해 보세요

회사는 "하나로 물산" 여의도 소재구요~
전화 : 516-1144 입니다.

아래는  그동안 제가 이런 질문편지 받았을때 보낸 답장입니다.
참고하시라고 올립니다.

그럼..

                      >>>>>   김  영  우   <<<<<

p.s

 안녕하세요~?
 메일 잘 보았습니다.

 그런데 죄송한 말씀을 드려야 겠네요~
 디그동에 소개한 칩들은 제가 오래전에 회사에서 구매한것이라서
 지금은 구하기가 어렵다네요.

 그때 납품한 업자에게 연락을 해서 또 알아봐달라고 했지만
 거기 답변도 시원찮아요..
 그때도 직수입해서 납품한거라고 하구요~

 그래서 지금 여러군데 알아보고 있는중이거든요~
 결과 나오는대로 디그동에 게시물로 올리기로 약속합니다.
 제 명에를 위해서라도 이런 약속들은 잊지말고 지켜야 하겠지요~

 그리고, 참고로 몇 가지 말씀드릴께요~

  SSI 는 Silicon System INC. 회사의 Product 시리즈구요.
  MT  는 Mi-Tel 이구요.
  MC  는 모토롤라~
  KT  는 (한국통신이 아니고) 삼성반도체 제품입니다.

 제가 아직 알아보진 못했는데~
 MC 145436 하고 KT3720 은 직접 모토롤라나 삼성으로 알아보시면
 알 수 있을거 같네요~

 암튼~ 저도 꼭 알아봐 드리겠습니다.

 그럼.. 이만.~

        >>>>>>  김   영   우  (ynwkim)   <<<<<<



#938   김병제   (sowhat  )
[정보] 홈오토 칩딜러 또 알았습니다.          06/01 17:35   8 line

석호전자라구 청계천에 있는거 같은데요
관련 칩들이 있답니다.
가격은 9000 원정도 하구요
재고가 17 개 밖에 없다네요
빨리 가셔야 할거 같아요~

그럼

